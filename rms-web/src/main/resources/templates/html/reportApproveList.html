<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>月報承認状況一覧画面</title>

	<!-- jQuery -->
	<script th:src="@{/fw/jquery/js/jquery-3.1.1.min.js}" src="../../static/fw/jquery/js/jquery-3.1.1.min.js"></script>
	<!-- bootstrap -->
	<link rel="stylesheet" id="myTheme" th:href="@{|/fw/bootstrap/css/bootswatch-theme-${theme}.min.css|}" href="../../static/fw/bootstrap/css/bootswatch-theme-Cerulean.min.css" />
	<script th:src="@{/fw/bootstrap/js/bootstrap.min.js}" src="../../static/fw/bootstrap/js/bootstrap.min.js"></script>
	<!-- 共通JS/CSS -->
	<link th:replace="html/include/include_lib"></link>
	<!-- 個別 -->
	<script th:src="@{/js/reportApproveList.js}" src="../../static/js/reportApproveList.js"></script>
</head>
<body>
<form th:action="@{/}" th:object="${reportApproveListForm}" id="formMain" method="post" th:novalidate="${novalidate}">

	<!-- ナビバー -->
	<div th:replace="html/include/include_navbar::navbar2"></div>

	<!-- container -->
	<div class="container">
	<!-- 画面サイズ指定 -->
	<div class="row" style="max-width: 80em">

		<!-- ヘッダ -->
		<div class="page-header">
			<h3>月報承認状況一覧画面</h3>
		</div>

		<!-- メッセージ -->
		<div th:replace="html/include/include_message::message" ></div>

		<!--
			検索条件
		 -->
		<div class="form-horizontal">
			<!-- 年月 -->
			<div class="form-group">
				<label class="col-sm-3 control-label">年月</label>
				<div class="col-sm-9">
					<input type="text" th:value="*{condition.targetYm}" name="condition.targetYm" id="condition.targetYm" class="form-control datepicker-ym" />
				</div>
			</div>
			<!-- ボタン -->
			<div class="text-center">
				<button type="submit" id="back" formnovalidate="formnovalidate" class="btn btn-primary">
					戻る <span class="glyphicon glyphicon-chevron-left"></span>
				</button>
				<button type="submit" id="search" class="btn btn-primary">
					検索 <span class="glyphicon glyphicon-search"></span>
				</button>
				<button type="submit" id="bulkDownload" formnovalidate="formnovalidate" class="btn btn-primary">
					一括DL <span class="glyphicon glyphicon-download"></span>
				</button>
				<button type="submit" id="bulkApprove" formnovalidate="formnovalidate" class="btn btn-primary">
					一括承認 <span class="glyphicon glyphicon-chevron-right"></span>
				</button>
			</div>
		</div>

		<!--
			検索結果
		 -->
		<div th:if="*{#lists.isEmpty(resultList) == false}">
			<!-- ページング -->
			<div th:replace="html/include/include_page::pageing" ></div>

			<!-- 検索結果テーブル -->
			<table class="table table-hover table-condensed dataTable" id="resultTable">
				<!-- ヘッダ -->
				<thead class="thead-default">
					<tr>
						<th>選択</th>
						<th>年月</th>
						<th>申請者</th>
						<th>部署</th>
						<th>申請日</th>
						<th>承認者１</th>
						<th>承認者２</th>
						<th>承認者３</th>
						<th>承認者４</th>
						<th>承認状況</th>
						<th>月報</th>
						<th><input type="checkbox" id="switchReportDLCheck" /></th>
					</tr>
				</thead>
				<!-- 明細 -->
				<tbody>
					<tr th:each="result,iteStatus : *{resultList}">
						<td>
							<button type="submit" name="select" formnovalidate="formnovalidate" class="btn btn-default btn-sm"
									th:value="${iteStatus.index}" th:disabled="${result.operateFlg == false}">選択</button>
						</td>
						<td th:text="${result.targetYm}">201707</td>
						<td th:text="${result.applyUserNm}">申請者</td>
						<td th:text="${result.departmentRnm}">2SOL</td>
						<td th:text="${result.applyDate} ? ${#temporals.format(result.applyDate, 'yyyy/MM/dd')}">2016/05/31</td>
						<td th:text="${result.approveUserNm1}">承認者１</td>
						<td th:text="${result.approveUserNm2}">承認者２</td>
						<td th:text="${result.approveUserNm3}">承認者３</td>
						<td th:text="${result.approveUserNm4}">承認者４</td>
						<td th:text="${result.statusNm}">承認済み</td>
						<td>
							<button type="submit" name="download" th:if="${result.reportDLFlg == true}" th:value="${iteStatus.index}" formnovalidate="formnovalidate" class="btn btn-link btn-sm">
								月報DL<span class="glyphicon glyphicon-download"></span>
							</button>
						</td>
						<td><input type="checkbox" name="reportDLCheck" th:value="${iteStatus.index}" th:if="${result.reportDLFlg == true}" /></td>
					</tr>
				</tbody>
			</table>
		</div>

		<!-- 上に戻るアンカー -->
		<div th:replace="html/include/include_pageTop"></div>

	</div>
	</div>

	<!-- checkbox未送信対応（一覧用） -->
	<input type="hidden" name="_reportDLCheck" value="on" />
</form>
</body>
</html>
